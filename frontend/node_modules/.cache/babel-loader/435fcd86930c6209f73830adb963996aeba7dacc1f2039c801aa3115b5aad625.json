{"ast":null,"code":"import _regeneratorRuntime from\"/Users/georgina/DestigFemmeDemoPi/frontend/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/Users/georgina/DestigFemmeDemoPi/frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/Users/georgina/DestigFemmeDemoPi/frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";// Import React and Material UI components as before...\nimport{Card,CardContent,CardActions,Typography,IconButton}from'@mui/material';import axios from'axios';import{useNavigate}from'react-router-dom';import React,{useEffect,useState}from'react';import{useLocation}from'react-router-dom';import HeartIcon from'@mui/icons-material/Favorite';import Button from'@mui/material/Button';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var _window=window;var backendURL=_window.__ENV&&_window.__ENV.backendURL;var axiosClient=axios.create({baseURL:\"\".concat(backendURL),timeout:20000,withCredentials:true});var config={headers:{'Content-Type':'application/json','Access-Control-Allow-Origin':'*'}};// Define the PostCard component    \nexport default function CommentCard(_ref){var _id=_ref._id,content=_ref.content;var navigate=useNavigate();var _useState=useState(false),_useState2=_slicedToArray(_useState,2),isLiked=_useState2[0],setIsLiked=_useState2[1];var _useState3=useState(0),_useState4=_slicedToArray(_useState3,2),likeCount=_useState4[0],setLikesCount=_useState4[1];var location=useLocation();var _useState5=useState(null),_useState6=_slicedToArray(_useState5,2),comment=_useState6[0],setComment=_useState6[1];var _useState7=useState(null),_useState8=_slicedToArray(_useState7,2),commentId=_useState8[0],setCommentId=_useState8[1];var postId=location.state.postId;console.log(commentId);var handleLike=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var response;return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return axiosClient.post(\"/comments/likeComment/\".concat(_id));case 3:response=_context.sent;// Update based on the actual response\nsetIsLiked(response.data.isLiked);setLikesCount(response.data.likeCount);_context.next=11;break;case 8:_context.prev=8;_context.t0=_context[\"catch\"](0);console.error(\"Failed to handle post like/unlike: \",_context.t0);// Optionally revert optimistic updates in case of error\ncase 11:case\"end\":return _context.stop();}}},_callee,null,[[0,8]]);}));return function handleLike(){return _ref2.apply(this,arguments);};}();var handleNavigatePublicProfile=function handleNavigatePublicProfile(){var username=arguments.length>0&&arguments[0]!==undefined?arguments[0]:'';navigate(\"/profile/\".concat(username));};var handleCommentClick=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(){var comment,_args2=arguments;return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:comment=_args2.length>0&&_args2[0]!==undefined?_args2[0]:null;if(comment){setCommentId(comment._id);}handleLike();case 3:case\"end\":return _context2.stop();}}},_callee2);}));return function handleCommentClick(){return _ref3.apply(this,arguments);};}();useEffect(function(){//fetch the like status and count\nvar fetchLikeStatus=/*#__PURE__*/function(){var _ref4=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee3(){var response;return _regeneratorRuntime().wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:_context3.prev=0;_context3.next=3;return axiosClient.get(\"/comments/likeComment/\".concat(_id));case 3:response=_context3.sent;setIsLiked(response.data.isLiked);console.log(response.data);setLikesCount(response.data.likeCount);_context3.next=12;break;case 9:_context3.prev=9;_context3.t0=_context3[\"catch\"](0);console.error(\"Failed to fetch like status: \",_context3.t0);case 12:case\"end\":return _context3.stop();}}},_callee3,null,[[0,9]]);}));return function fetchLikeStatus(){return _ref4.apply(this,arguments);};}();fetchLikeStatus();},[_id]);return/*#__PURE__*/_jsxs(Card,{children:[/*#__PURE__*/_jsx(CardContent,{children:/*#__PURE__*/_jsx(Typography,{variant:\"body1\",component:\"h2\",children:content})}),/*#__PURE__*/_jsxs(CardActions,{children:[/*#__PURE__*/_jsx(Typography,{children:likeCount}),/*#__PURE__*/_jsx(IconButton,{\"aria-label\":\"like post\",onClick:function onClick(){return handleCommentClick(comment);},style:{padding:'0'},children:/*#__PURE__*/_jsx(HeartIcon,{style:{fontSize:'16px',fill:isLiked?'red':'none',// Change color based on like status\nstroke:'black',strokeWidth:'2px'}})}),/*#__PURE__*/_jsxs(Button,{onClick:function onClick(){return handleNavigatePublicProfile(comment===null||comment===void 0?void 0:comment.user.username);},style:{fontWeight:'bold',color:'#9E4291',textTransform:'none'},children:[\"By: \",(comment===null||comment===void 0?void 0:comment.user.username)||'Anonymous']})]})]});};","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}