{"ast":null,"code":"import _defineProperty from\"/Users/georgina/DestigFemmeDemoPi/frontend/node_modules/@babel/runtime/helpers/esm/defineProperty.js\";import _objectSpread from\"/Users/georgina/DestigFemmeDemoPi/frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _slicedToArray from\"/Users/georgina/DestigFemmeDemoPi/frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";// Date: 09/08/2021\n// Description: This is the main page for the Add page. It will display the header, the form, and the bottom navigation bar.\n// Created by Georgina Alacaraz\nimport React,{useState}from'react';import axios from'axios';import{TextField,Button}from'@mui/material';import Card from'@mui/material/Card';import CardContent from'@mui/material/CardContent';import Grid from'@mui/material/Grid';import Typography from'@mui/material/Typography';import{useEffect}from'react';// Make TS accept the existence of our window.__ENV object - defined in index.html:\nimport{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var _window=window;var backendURL=_window.__ENV&&_window.__ENV.backendURL;var axiosClient=axios.create({baseURL:\"\".concat(backendURL),timeout:20000,withCredentials:true});var config={headers:{'Content-Type':'application/json','Access-Control-Allow-Origin':'*'}};// Add null check\nexport default function ProfileEdit(){var _useState=useState(false),_useState2=_slicedToArray(_useState,2),editMode=_useState2[0],setEditMode=_useState2[1];var _useState3=useState(null),_useState4=_slicedToArray(_useState3,2),userData=_useState4[0],setUserData=_useState4[1];var _useState5=useState({username:userData===null||userData===void 0?void 0:userData.username,// Initial state, replace with user.username\nbio:userData===null||userData===void 0?void 0:userData.bio}),_useState6=_slicedToArray(_useState5,2),profile=_useState6[0],setProfile=_useState6[1];var handleChange=function handleChange(event){var _event$target=event.target,name=_event$target.name,value=_event$target.value;setProfile(function(prevProfile){return _objectSpread(_objectSpread({},prevProfile),{},_defineProperty({},name,value));});};var handleSave=function handleSave(){axiosClient.post('/user/update',{username:profile.username,bio:profile.bio}).then(function(response){console.log('Response data for /user/update:',response.data);setEditMode(false);}).catch(function(error){console.error('Error fetching /user/update:',error);});};useEffect(function(){axiosClient.get('/user/userInfo').then(function(response){console.log('Response data for /user/me:',response.data);setProfile(response.data);}).catch(function(error){console.error('Error fetching /user/me:',error);});},[]);return/*#__PURE__*/_jsx(Card,{style:{maxWidth:\"100%\",margin:'auto',marginTop:0,boxShadow:'none',border:'none'},children:/*#__PURE__*/_jsx(CardContent,{children:/*#__PURE__*/_jsxs(Grid,{container:true,spacing:1,children:[/*#__PURE__*/_jsx(Grid,{item:true,xs:12,children:editMode?/*#__PURE__*/_jsx(TextField,{label:\"Username\",variant:\"outlined\",fullWidth:true,name:\"username\",value:profile.username,onChange:handleChange}):/*#__PURE__*/_jsxs(Typography,{children:[/*#__PURE__*/_jsx(\"span\",{style:{fontWeight:'bold'},children:\"@\"}),profile.username]})}),/*#__PURE__*/_jsx(Grid,{item:true,xs:12,children:editMode?/*#__PURE__*/_jsx(TextField,{label:\"Bio\",variant:\"outlined\",fullWidth:true,multiline:true,rows:4,name:\"bio\",value:profile.bio,onChange:handleChange}):/*#__PURE__*/_jsxs(Typography,{children:[/*#__PURE__*/_jsx(\"span\",{style:{fontWeight:'bold'}}),\" \",profile.bio]})}),/*#__PURE__*/_jsx(Grid,{item:true,xs:5,children:/*#__PURE__*/_jsx(Button,{variant:\"contained\",color:\"secondary\",onClick:function onClick(){return setEditMode(!editMode);},onSubmit:handleSave,style:{padding:'6px 5px',height:'25px',textTransform:'none'},children:editMode?'Save':'Edit'})})]})})});}","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}