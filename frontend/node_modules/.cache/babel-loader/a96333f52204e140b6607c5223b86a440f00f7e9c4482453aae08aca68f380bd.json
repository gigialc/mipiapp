{"ast":null,"code":"import _regeneratorRuntime from\"/Users/georgina/DestigFemmeDemoPi/frontend/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/Users/georgina/DestigFemmeDemoPi/frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/Users/georgina/DestigFemmeDemoPi/frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";// Import React and Material UI components as before...\nimport{Card,CardContent,CardActions,Typography,IconButton}from'@mui/material';import axios from'axios';import{useNavigate}from'react-router-dom';import React,{useEffect,useState}from'react';import{useLocation}from'react-router-dom';import HeartIcon from'@mui/icons-material/Favorite';import ChatBubbleOutlineIcon from'@mui/icons-material/ChatBubbleOutline';import Grid from'@mui/material/Grid';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var _window=window;var backendURL=_window.__ENV&&_window.__ENV.backendURL;var axiosClient=axios.create({baseURL:\"\".concat(backendURL),timeout:20000,withCredentials:true});var config={headers:{'Content-Type':'application/json','Access-Control-Allow-Origin':'*'}};// Define the PostCard component    \nexport default function PostCard(_ref){var _id=_ref._id,title=_ref.title,description=_ref.description;var navigate=useNavigate();var _useState=useState(false),_useState2=_slicedToArray(_useState,2),isLiked=_useState2[0],setIsLiked=_useState2[1];var _useState3=useState(0),_useState4=_slicedToArray(_useState3,2),likeCount=_useState4[0],setLikesCount=_useState4[1];var location=useLocation();var postId=location.state.postId;console.log(postId);var handleLike=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var response;return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return axiosClient.post(\"/posts/like/\".concat(_id));case 3:response=_context.sent;// Update based on the actual response\nsetIsLiked(response.data.isLiked);setLikesCount(response.data.likeCount);_context.next=11;break;case 8:_context.prev=8;_context.t0=_context[\"catch\"](0);console.error(\"Failed to handle post like/unlike: \",_context.t0);// Optionally revert optimistic updates in case of error\ncase 11:case\"end\":return _context.stop();}}},_callee,null,[[0,8]]);}));return function handleLike(){return _ref2.apply(this,arguments);};}();useEffect(function(){//fetch the like status and count\nvar fetchLikeStatus=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(){var response;return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.prev=0;_context2.next=3;return axiosClient.get(\"/posts/like/\".concat(_id));case 3:response=_context2.sent;setIsLiked(response.data.isLiked);setLikesCount(response.data.likeCount);_context2.next=11;break;case 8:_context2.prev=8;_context2.t0=_context2[\"catch\"](0);console.error(\"Failed to fetch like status: \",_context2.t0);case 11:case\"end\":return _context2.stop();}}},_callee2,null,[[0,8]]);}));return function fetchLikeStatus(){return _ref3.apply(this,arguments);};}();fetchLikeStatus();},[_id]);return/*#__PURE__*/_jsxs(Card,{style:{margin:16,paddingBottom:10,marginLeft:20,width:'calc(100% - 40px)',boxShadow:\"0 0 0 1px #E69BD1\",backgroundColor:\"#eec1e1\"},children:[/*#__PURE__*/_jsx(CardContent,{children:/*#__PURE__*/_jsx(Grid,{container:true,justifyContent:\"space-between\",alignItems:\"center\",children:/*#__PURE__*/_jsxs(Grid,{item:true,children:[/*#__PURE__*/_jsx(Typography,{variant:\"h6\",gutterBottom:true,style:{fontWeight:'bold'},children:title}),/*#__PURE__*/_jsx(Typography,{variant:\"body1\",component:\"p\",children:description})]})})}),/*#__PURE__*/_jsxs(CardActions,{sx:{marginTop:'auto',display:'flex',justifyContent:'space-between'},children:[/*#__PURE__*/_jsx(IconButton,{\"aria-label\":\"add a comment\",onClick:function onClick(){return navigate(\"/comments\",{state:{postId:_id}});},children:/*#__PURE__*/_jsx(ChatBubbleOutlineIcon,{style:{fontSize:'16px',color:\"black\"}})}),/*#__PURE__*/_jsxs(Grid,{container:true,justifyContent:\"flex-end\",alignItems:\"center\",spacing:1,children:[/*#__PURE__*/_jsx(Grid,{item:true,children:/*#__PURE__*/_jsx(IconButton,{\"aria-label\":\"like post\",onClick:handleLike,style:{padding:'0'},children:/*#__PURE__*/_jsx(HeartIcon,{style:{fontSize:'16px',// Change the color based on the like status\nfill:isLiked?'red':'none',stroke:'black',strokeWidth:'2px'}})})}),/*#__PURE__*/_jsx(Grid,{item:true,children:/*#__PURE__*/_jsx(Typography,{variant:\"body2\",sx:{display:'inline',marginRight:'4px'},children:likeCount})})]})]})]});};","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}