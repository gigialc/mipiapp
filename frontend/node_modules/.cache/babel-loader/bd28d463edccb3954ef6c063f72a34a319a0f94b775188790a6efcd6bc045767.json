{"ast":null,"code":"import _regeneratorRuntime from\"/Users/georgina/DestigFemmeDemoPi/frontend/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/Users/georgina/DestigFemmeDemoPi/frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/Users/georgina/DestigFemmeDemoPi/frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";// Created by Georgina Alacaraz\nimport MuiBottomNavigation from\"../MuiBottomNavigation\";import Header from\"./components/Header\";import{Typography}from\"@mui/material\";import{onReadyForServerApproval,onReadyForServerCompletion}from\"./components/Payments\";import SignIn from\"./components/SignIn\";import ProductCard from\"./components/ProductCard\";import{UserContext}from\"./components/Auth\";import React from\"react\";import{useState,useEffect}from\"react\";import{useNavigate}from'react-router-dom';import axios from'axios';// testing to link blog posts to blog pages\n// Make TS accept the existence of our window.__ENV object - defined in index.html:\nimport{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var _window=window;var backendURL=_window.__ENV&&_window.__ENV.backendURL;var axiosClient=axios.create({baseURL:\"\".concat(backendURL),timeout:20000,withCredentials:true});var config={headers:{'Content-Type':'application/json','Access-Control-Allow-Origin':'*'}};export default function HomePage(){var _ref=React.useContext(UserContext),user=_ref.user,saveUser=_ref.saveUser,showModal=_ref.showModal,saveShowModal=_ref.saveShowModal,onModalClose=_ref.onModalClose;// also added this!!!!!!\nvar _useState=useState(null),_useState2=_slicedToArray(_useState,2),createCommunityData=_useState2[0],setCreateCommunityData=_useState2[1];;var _useState3=useState(null),_useState4=_slicedToArray(_useState3,2),selectedCommunity=_useState4[0],setSelectedCommunity=_useState4[1];var navigate=useNavigate();var getGreeting=function getGreeting(){var currentHour=new Date().getHours();if(currentHour>=0&&currentHour<12){return\"Good Morning\";}else if(currentHour>=12&&currentHour<18){return\"Good Afternoon\";}else{return\"Good Night\";}};var orderProduct=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(memo,amount,paymentMetadata){var paymentData,callbacks;return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:if(!(user.uid===\"\")){_context.next=2;break;}return _context.abrupt(\"return\",saveShowModal(true));case 2:paymentData={amount:amount,memo:memo,metadata:paymentMetadata};callbacks={onReadyForServerApproval:onReadyForServerApproval,onReadyForServerCompletion:onReadyForServerCompletion//onCancel,\n//onError\n};//make a payment\n//const payment = await window.Pi.createPayment(paymentData, callbacks);\n// Make an API call to add person to the community if the payment was successful\n//if (payment.paymentCompleted === true){\nconsole.log(\"Payment was successful\");axiosClient.post('/user/addUser',paymentMetadata).then(function(response){console.log(response);// Redirect to the chat page\nnavigate(\"/Chat\",{state:{communityId:selectedCommunity===null||selectedCommunity===void 0?void 0:selectedCommunity._id}});}).catch(function(error){console.log(error);});//}\ncase 6:case\"end\":return _context.stop();}}},_callee);}));return function orderProduct(_x,_x2,_x3){return _ref2.apply(this,arguments);};}();useEffect(function(){console.log(createCommunityData);},[createCommunityData]);useEffect(function(){axiosClient.get('/user/userInfo').then(function(response){console.log('Response data for /user/me:',response.data);}).catch(function(error){console.error('Error fetching /user/me:',error);});},[]);useEffect(function(){// Make an API call to fetch the create community data\naxiosClient.get('/community/hi').then(function(response){console.log(response);setCreateCommunityData(response.data);console.log(response.data);}).catch(function(error){console.log(error);});},[]);useEffect(function(){axiosClient.get('/user/joined').then(function(response){console.log('Joined communities:',response.data);setSelectedCommunity(response.data);}).catch(function(error){console.error('Error fetching joined communities:',error);});},[]);return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(Header,{}),/*#__PURE__*/_jsx(Typography,{variant:\"h5\",style:{fontWeight:'bold',color:'#E69BD1',marginBottom:'10px',marginLeft:20},children:\"Communities \\u2728\"}),createCommunityData?createCommunityData.map(function(community){console.log(community);return/*#__PURE__*/_jsx(ProductCard,{// Make sure to include a unique key prop for each element in the array\nname:community.name,description:community.description,price:community.price//user who created the community\n,owner:community.user&&community.user.username,community:community},community._id);}):/*#__PURE__*/_jsx(Typography,{variant:\"body1\",style:{color:'#ff69b4'},children:\"No community data available\"}),showModal&&/*#__PURE__*/_jsx(SignIn,{onSignIn:saveUser,onModalClose:onModalClose,showModal:showModal}),/*#__PURE__*/_jsxs(\"div\",{style:{paddingTop:'20px'},children:[\" \",/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(MuiBottomNavigation,{})]})]});}","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}