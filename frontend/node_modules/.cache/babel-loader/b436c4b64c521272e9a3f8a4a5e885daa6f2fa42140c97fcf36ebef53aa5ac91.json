{"ast":null,"code":"import _regeneratorRuntime from\"/Users/georgina/DestigFemmeDemoPi/frontend/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/Users/georgina/DestigFemmeDemoPi/frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/Users/georgina/DestigFemmeDemoPi/frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";// Created by Georgina Alacaraz\nimport{onCancel,onError,onReadyForServerApproval,onReadyForServerCompletion}from\"../components/Payments\";import Typography from\"@mui/material/Typography\";import{UserContext}from\"../components/Auth\";import React,{useEffect,useState}from\"react\";import axios from'axios';import{useNavigate}from'react-router-dom';// Import Dialog component\nimport List from'@mui/material/List';import ListItem from'@mui/material/ListItem';import ListItemText from'@mui/material/ListItemText';// Make TS accept the existence of our window.__ENV object - defined in index.html:\nimport{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var _window=window;var backendURL=_window.__ENV&&_window.__ENV.backendURL;var axiosClient=axios.create({baseURL:\"\".concat(backendURL),timeout:20000,withCredentials:true});var config={headers:{'Content-Type':'application/json','Access-Control-Allow-Origin':'*'}};export default function MyList(){var _ref=React.useContext(UserContext),user=_ref.user,saveUser=_ref.saveUser,showModal=_ref.showModal,saveShowModal=_ref.saveShowModal,onModalClose=_ref.onModalClose;var _useState=useState(null),_useState2=_slicedToArray(_useState,2),createCommunityData=_useState2[0],setCreateCommunityData=_useState2[1];var _useState3=useState(null),_useState4=_slicedToArray(_useState3,2),selectedCommunity=_useState4[0],setSelectedCommunity=_useState4[1];// Moved here\nvar _useState5=useState(null),_useState6=_slicedToArray(_useState5,2),userData=_useState6[0],setUserData=_useState6[1];var _useState7=useState(false),_useState8=_slicedToArray(_useState7,2),openFormModal=_useState8[0],setOpenFormModal=_useState8[1];var _useState9=useState(0),_useState10=_slicedToArray(_useState9,2),tabValue=_useState10[0],setTabValue=_useState10[1];// Default to the first tab\nconsole.log(\"User Data :\",userData);var navigate=useNavigate();var getGreeting=function getGreeting(){var currentHour=new Date().getHours();if(currentHour>=0&&currentHour<12){return\"Good Morning\";}else if(currentHour>=12&&currentHour<18){return\"Good Afternoon\";}else{return\"Good Night\";}};var handleCommunityClick=function handleCommunityClick(community){// get the community id and make it a current session\nconsole.log(community._id);navigate(\"/ChatCreator\",{state:{communityId:community._id}});};var handleCommunityClick1=function handleCommunityClick1(community){console.log(community._id);navigate(\"/Chat\",{state:{communityId:community._id}});};// Function to open the modal\nvar handleOpenFormModal=function handleOpenFormModal(){setOpenFormModal(true);};// Function to close the modal\nvar handleCloseFormModal=function handleCloseFormModal(){setOpenFormModal(false);};var orderProduct=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(memo,amount,paymentMetadata){var paymentData,callbacks,payment;return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:if(!(user.uid===\"\")){_context.next=2;break;}return _context.abrupt(\"return\",saveShowModal(true));case 2:// Define a state to track the selected community\npaymentData={amount:amount,memo:memo,metadata:paymentMetadata};callbacks={onReadyForServerApproval:onReadyForServerApproval,onReadyForServerCompletion:onReadyForServerCompletion,onCancel:onCancel,onError:onError};_context.next=6;return window.Pi.createPayment(paymentData,callbacks);case 6:payment=_context.sent;console.log(payment);case 8:case\"end\":return _context.stop();}}},_callee);}));return function orderProduct(_x,_x2,_x3){return _ref2.apply(this,arguments);};}();useEffect(function(){console.log(user);},[user]);useEffect(function(){axiosClient.get('/user/me').then(function(response){console.log('Response data for /user/me:',response.data);// If response.data is an array, we can use forEach\nif(Array.isArray(response.data)){response.data.forEach(function(community){if(!community._id){console.error('Community does not have _id:',community);}});setCreateCommunityData(response.data);}else{console.error('Expected an array for /user/me response data, but got:',response.data);}}).catch(function(error){console.error('Error fetching /user/me:',error);});},[]);useEffect(function(){axiosClient.get('/user/joined').then(function(response){console.log('Joined communities:',response.data);setSelectedCommunity(response.data);}).catch(function(error){console.error('Error fetching joined communities:',error);});},[]);return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"div\",{style:{display:'flex',alignItems:'center',justifyContent:'flex-end',marginBottom:'5px'}}),/*#__PURE__*/_jsx(List,{children:createCommunityData?createCommunityData.map(function(community){return/*#__PURE__*/_jsx(ListItem,{onClick:function onClick(){return handleCommunityClick(community);},style:{backgroundColor:'#efc9e4',marginBottom:'10px',borderRadius:'4px',boxShadow:\"\\n                    0 -2px 4px rgba(255, 182, 193, 0.2), \\n                    0 2px 4px rgba(255, 182, 193, 0.2),\\n                    0 2px 4px rgba(0,0,0,0.1)\"},children:/*#__PURE__*/_jsx(ListItemText,{primary:community.name,secondary:community.description})},community._id);}):/*#__PURE__*/_jsx(Typography,{variant:\"body1\",children:\"No community data available\"})})]});}// Created by Georgina Alacaraz","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}