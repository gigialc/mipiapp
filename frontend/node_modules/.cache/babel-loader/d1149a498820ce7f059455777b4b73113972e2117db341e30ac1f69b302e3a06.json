{"ast":null,"code":"import _regeneratorRuntime from\"/Users/georgina/DestigFemmeDemoPi/frontend/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/Users/georgina/DestigFemmeDemoPi/frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/Users/georgina/DestigFemmeDemoPi/frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";//Created by Georgina Alacaraz\nimport React,{useEffect,useState}from'react';import axios from'axios';import{useLocation}from'react-router-dom';import{UserContext}from'./Auth';import{CardContent,Typography}from'@mui/material';import CommentCard from'./commentsCard';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var _window=window;var backendURL=_window.__ENV&&_window.__ENV.backendURL;var axiosClient=axios.create({baseURL:\"\".concat(backendURL),timeout:20000,withCredentials:true});var config={headers:{'Content-Type':'application/json','Access-Control-Allow-Origin':'*'}};export default function CommentContent(){var _ref=React.useContext(UserContext),user=_ref.user,saveUser=_ref.saveUser,showModal=_ref.showModal,saveShowModal=_ref.saveShowModal,onModalClose=_ref.onModalClose;var _useState=useState(null),_useState2=_slicedToArray(_useState,2),post=_useState2[0],setPost=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),isLiked=_useState4[0],setIsLiked=_useState4[1];var _useState5=useState(0),_useState6=_slicedToArray(_useState5,2),likesCount=_useState6[0],setLikesCount=_useState6[1];var _useState7=useState([]),_useState8=_slicedToArray(_useState7,2),comments=_useState8[0],setComments=_useState8[1];var _useState9=useState(null),_useState10=_slicedToArray(_useState9,2),commentId=_useState10[0],setCommentId=_useState10[1];var location=useLocation();var postId=location.state.postId;console.log(postId);//return comments from this postID\nuseEffect(function(){var fetchComments=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var response;return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return axiosClient.get(\"/comments/fetch/\".concat(postId));case 3:response=_context.sent;console.log(response.data.comments);setComments(response.data.comments||[]);_context.next=11;break;case 8:_context.prev=8;_context.t0=_context[\"catch\"](0);console.error(\"Failed to fetch comments: \",_context.t0);case 11:case\"end\":return _context.stop();}}},_callee,null,[[0,8]]);}));return function fetchComments(){return _ref2.apply(this,arguments);};}();fetchComments();var fetchLikeStatus=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(){var response;return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.prev=0;_context2.next=3;return axiosClient.get(\"/comments/likeComment/\".concat(postId));case 3:response=_context2.sent;setIsLiked(response.data.isLiked);console.log(response.data);setLikesCount(response.data.likeCount);_context2.next=12;break;case 9:_context2.prev=9;_context2.t0=_context2[\"catch\"](0);console.error(\"Failed to fetch like status: \",_context2.t0);case 12:case\"end\":return _context2.stop();}}},_callee2,null,[[0,9]]);}));return function fetchLikeStatus(){return _ref3.apply(this,arguments);};}();fetchLikeStatus();var fetchPost=/*#__PURE__*/function(){var _ref4=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee3(){var response;return _regeneratorRuntime().wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:_context3.prev=0;_context3.next=3;return axiosClient.get(\"/posts/\".concat(postId));case 3:response=_context3.sent;console.log(response.data);setPost(response.data||null);_context3.next=11;break;case 8:_context3.prev=8;_context3.t0=_context3[\"catch\"](0);console.error(\"Failed to fetch post: \",_context3.t0);case 11:case\"end\":return _context3.stop();}}},_callee3,null,[[0,8]]);}));return function fetchPost(){return _ref4.apply(this,arguments);};}();fetchPost();},[postId,commentId]);return/*#__PURE__*/_jsxs(\"div\",{style:{maxWidth:'600px',margin:'1',textAlign:'left'},children:[post?/*#__PURE__*/_jsxs(CardContent,{children:[/*#__PURE__*/_jsx(Typography,{variant:\"h6\",gutterBottom:true,align:\"left\",children:post.title}),/*#__PURE__*/_jsx(Typography,{variant:\"body1\",color:\"text.secondary\",align:\"left\",children:post.description})]}):/*#__PURE__*/_jsx(Typography,{variant:\"subtitle2\",style:{marginTop:'5px',fontStyle:\"italic\",color:'#9E4291'},children:\"Loading post...\"}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"br\",{}),comments.map(function(comment){return/*#__PURE__*/_jsx(CommentCard,{_id:comment._id,content:comment.content,user:comment.user,likes:comment.likes,postId:postId},comment._id);})]});}","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}