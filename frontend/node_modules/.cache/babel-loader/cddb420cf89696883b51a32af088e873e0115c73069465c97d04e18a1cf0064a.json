{"ast":null,"code":"import _slicedToArray from\"/Users/georgina/DestigFemmeDemoPi/frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useContext,useState}from'react';import axios from'axios';import{TextField,Button,Stack}from'@mui/material';import{UserContext}from\"./Auth\";import{Dialog,DialogActions,DialogContent,DialogContentText,DialogTitle}from'@mui/material';import AddIcon from'@mui/icons-material/Add';import Fab from'@mui/material/Fab';// Make TS accept the existence of our window.__ENV object - defined in index.html:\nimport{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var _window=window;var backendURL=_window.__ENV&&_window.__ENV.backendURL;var axiosClient=axios.create({baseURL:\"\".concat(backendURL),timeout:20000,withCredentials:true});var config={headers:{'Content-Type':'application/json','Access-Control-Allow-Origin':'*'}};// Add null check\nexport default function Posts(_ref){var communityId=_ref.communityId;var _useState=useState(false),_useState2=_slicedToArray(_useState,2),open=_useState2[0],setOpen=_useState2[1];var handleClickOpen=function handleClickOpen(){setOpen(true);};var handleClose=function handleClose(){setOpen(false);};var _useState3=useState(''),_useState4=_slicedToArray(_useState3,2),title=_useState4[0],setTitle=_useState4[1];var _useState5=useState(''),_useState6=_slicedToArray(_useState5,2),description=_useState6[0],setDescription=_useState6[1];var _useState7=useState(false),_useState8=_slicedToArray(_useState7,2),titleError=_useState8[0],setTitleError=_useState8[1];var _useState9=useState(false),_useState10=_slicedToArray(_useState9,2),descriptionError=_useState10[0],setDescriptionError=_useState10[1];var _useState11=useState(''),_useState12=_slicedToArray(_useState11,2),titleErrorMessage=_useState12[0],setTitleErrorMessage=_useState12[1];var _useState13=useState(''),_useState14=_slicedToArray(_useState13,2),descriptionErrorMessage=_useState14[0],setDescriptionErrorMessage=_useState14[1];var _ref2=useContext(UserContext),user=_ref2.user,showModal=_ref2.showModal,saveShowModal=_ref2.saveShowModal,onModalClose=_ref2.onModalClose,addCommunityToUser=_ref2.addCommunityToUser;var onTitleChange=function onTitleChange(event){setTitle(event.target.value);};var onDescriptionChange=function onDescriptionChange(event){setDescription(event.target.value);};var handleSubmit=function handleSubmit(event){//get the community id and make it a current session\nevent.preventDefault();if(title===''){setTitleError(true);setTitleErrorMessage('Title is required');}else{setTitleError(false);setTitleErrorMessage('');}if(description===''){setDescriptionError(true);setDescriptionErrorMessage('Description is required');}else{setDescriptionError(false);setDescriptionErrorMessage('');}if(title!==''&&description!==''){var data={title:title,description:description,community_id:communityId,user_id:user===null||user===void 0?void 0:user.uid};axiosClient.post('/posts/posted',data,config).then(function(response){console.log(response);}).catch(function(error){console.log(error);});};};var modalStyle={backgroundColor:'#FEEAEE',position:'absolute',left:'15vw',top:'40%',width:'70vw',height:'25vh',border:'1px solid pink',textAlign:'center',display:'flex',flexDirection:'column',justifyContent:'center'};var inputStyle={backgroundColor:\"white\",margin:\"8px 0\",borderRadius:\"4px\"};return/*#__PURE__*/_jsxs(\"div\",{style:{padding:'32px',textAlign:'center'},children:[\" \",/*#__PURE__*/_jsx(Fab,{color:\"primary\",\"aria-label\":\"add\",style:{backgroundColor:\"#ffe6ff\",color:\"black\",position:'fixed',bottom:'75px',right:'20px'},onClick:handleClickOpen,children:/*#__PURE__*/_jsx(AddIcon,{})}),/*#__PURE__*/_jsxs(Dialog,{open:open,onClose:handleClose,\"aria-labelledby\":\"form-dialog-title\",children:[/*#__PURE__*/_jsx(DialogTitle,{id:\"form-dialog-title\",children:\"Add a post\"}),/*#__PURE__*/_jsxs(DialogContent,{children:[/*#__PURE__*/_jsx(DialogContentText,{children:\"Fill in the details for your new post.\"}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,children:[/*#__PURE__*/_jsxs(Stack,{spacing:2,children:[/*#__PURE__*/_jsx(TextField,{id:\"title\",label:\"Title\",variant:\"outlined\",value:title,onChange:onTitleChange,error:!!titleError,helperText:titleErrorMessage||'',fullWidth:true}),/*#__PURE__*/_jsx(TextField,{id:\"description\",label:\"Description\",variant:\"outlined\",value:description,onChange:onDescriptionChange,error:!!descriptionError,helperText:descriptionErrorMessage||'',fullWidth:true,multiline:true,rows:4})]}),/*#__PURE__*/_jsxs(DialogActions,{children:[/*#__PURE__*/_jsx(Button,{onClick:handleClose,style:{color:'#9E4291'},children:\"Cancel\"}),/*#__PURE__*/_jsx(Button,{type:\"submit\",variant:\"contained\",style:{backgroundColor:'#9E4291',color:'white'},children:\"Submit\"})]})]})]})]}),/*#__PURE__*/_jsxs(Dialog,{open:showModal,onClose:onModalClose,children:[/*#__PURE__*/_jsx(DialogTitle,{children:\"Your post has been created\"}),/*#__PURE__*/_jsx(DialogActions,{children:/*#__PURE__*/_jsx(Button,{onClick:onModalClose,color:\"primary\",children:\"Close\"})})]})]});};","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}