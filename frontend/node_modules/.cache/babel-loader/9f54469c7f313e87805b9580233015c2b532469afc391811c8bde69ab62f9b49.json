{"ast":null,"code":"import axios from 'axios';\nconst _window = window;\nconst backendURL = _window.__ENV && _window.__ENV.backendURL;\nconst axiosClient = axios.create({\n  baseURL: `${backendURL}`,\n  timeout: 20000,\n  withCredentials: true\n});\nconst config = {\n  headers: {\n    'Content-Type': 'application/json',\n    'Access-Control-Allow-Origin': '*'\n  }\n};\n\n/* \n* DEVELOPER NOTE:\n* logic for all of the payment callback functions that can be called\n* by the front end Pi SDK. See https://github.com/pi-apps/pi-platform-docs/blob/master/SDK_reference.md#callbacks-keys\n* for more information.\n*\n* implement your own logic as needed\n*/\n\nexport const onIncompletePaymentFound = payment => {\n  console.log(\"onIncompletePaymentFound\", payment);\n  return axiosClient.post('/payments/incomplete', {\n    payment\n  });\n};\nexport const onReadyForServerApproval = paymentId => {\n  console.log(\"onReadyForServerApproval\", paymentId);\n  axiosClient.post('/payments/approve', {\n    paymentId\n  }, config);\n};\nexport const onReadyForServerCompletion = (paymentId, txid) => {\n  console.log(\"onReadyForServerCompletion\", paymentId, txid);\n  return axiosClient.post('/payments/complete', {\n    paymentId,\n    txid\n  }, config);\n};\nexport const onCancel = paymentId => {\n  console.log(\"onCancel\", paymentId);\n  return axiosClient.post('/payments/cancelled_payment', {\n    paymentId\n  });\n};\nexport const onError = (error, payment) => {\n  console.error(\"onError\", error);\n  if (payment) {\n    console.log(payment);\n    // handle the error accordingly\n  }\n};","map":{"version":3,"names":["axios","_window","window","backendURL","__ENV","axiosClient","create","baseURL","timeout","withCredentials","config","headers","onIncompletePaymentFound","payment","console","log","post","onReadyForServerApproval","paymentId","onReadyForServerCompletion","txid","onCancel","onError","error"],"sources":["/Users/georgina/DestigFemmeDemoPi/mipiapp/frontend/src/Shop/components/Payments.tsx"],"sourcesContent":["import axios from 'axios';\nimport { WindowWithEnv, PaymentDTO } from \"./Types\";\n\nconst _window: WindowWithEnv = window;\nconst backendURL = _window.__ENV && _window.__ENV.backendURL;\n\nconst axiosClient = axios.create({ baseURL: `${backendURL}`, timeout: 20000, withCredentials: true});\nconst config = {headers: {'Content-Type': 'application/json', 'Access-Control-Allow-Origin': '*'}};\n \n/* \n* DEVELOPER NOTE:\n* logic for all of the payment callback functions that can be called\n* by the front end Pi SDK. See https://github.com/pi-apps/pi-platform-docs/blob/master/SDK_reference.md#callbacks-keys\n* for more information.\n*\n* implement your own logic as needed\n*/\n\nexport const onIncompletePaymentFound = (payment: PaymentDTO) => {\n    console.log(\"onIncompletePaymentFound\", payment);\n    return axiosClient.post('/payments/incomplete', {payment});\n  }\n  \nexport const onReadyForServerApproval = (paymentId: string) => {\n    console.log(\"onReadyForServerApproval\", paymentId);\n    axiosClient.post('/payments/approve', {paymentId}, config);\n  }\n  \nexport const onReadyForServerCompletion = (paymentId: string, txid: string) => {\n    console.log(\"onReadyForServerCompletion\", paymentId, txid);\n    return axiosClient.post('/payments/complete', {paymentId, txid}, config);\n  }\n  \nexport const onCancel = (paymentId: string) => {\n    console.log(\"onCancel\", paymentId);\n    return axiosClient.post('/payments/cancelled_payment', {paymentId});\n  }\n  \nexport const onError = (error: Error, payment?: PaymentDTO) => {\n  console.error(\"onError\", error);\n  if (payment) {\n      console.log(payment);\n      // handle the error accordingly\n    }\n  }"],"mappings":"AAAA,OAAOA,KAAK,MAAM,OAAO;AAGzB,MAAMC,OAAsB,GAAGC,MAAM;AACrC,MAAMC,UAAU,GAAGF,OAAO,CAACG,KAAK,IAAIH,OAAO,CAACG,KAAK,CAACD,UAAU;AAE5D,MAAME,WAAW,GAAGL,KAAK,CAACM,MAAM,CAAC;EAAEC,OAAO,EAAG,GAAEJ,UAAW,EAAC;EAAEK,OAAO,EAAE,KAAK;EAAEC,eAAe,EAAE;AAAI,CAAC,CAAC;AACpG,MAAMC,MAAM,GAAG;EAACC,OAAO,EAAE;IAAC,cAAc,EAAE,kBAAkB;IAAE,6BAA6B,EAAE;EAAG;AAAC,CAAC;;AAElG;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,OAAO,MAAMC,wBAAwB,GAAIC,OAAmB,IAAK;EAC7DC,OAAO,CAACC,GAAG,CAAC,0BAA0B,EAAEF,OAAO,CAAC;EAChD,OAAOR,WAAW,CAACW,IAAI,CAAC,sBAAsB,EAAE;IAACH;EAAO,CAAC,CAAC;AAC5D,CAAC;AAEH,OAAO,MAAMI,wBAAwB,GAAIC,SAAiB,IAAK;EAC3DJ,OAAO,CAACC,GAAG,CAAC,0BAA0B,EAAEG,SAAS,CAAC;EAClDb,WAAW,CAACW,IAAI,CAAC,mBAAmB,EAAE;IAACE;EAAS,CAAC,EAAER,MAAM,CAAC;AAC5D,CAAC;AAEH,OAAO,MAAMS,0BAA0B,GAAGA,CAACD,SAAiB,EAAEE,IAAY,KAAK;EAC3EN,OAAO,CAACC,GAAG,CAAC,4BAA4B,EAAEG,SAAS,EAAEE,IAAI,CAAC;EAC1D,OAAOf,WAAW,CAACW,IAAI,CAAC,oBAAoB,EAAE;IAACE,SAAS;IAAEE;EAAI,CAAC,EAAEV,MAAM,CAAC;AAC1E,CAAC;AAEH,OAAO,MAAMW,QAAQ,GAAIH,SAAiB,IAAK;EAC3CJ,OAAO,CAACC,GAAG,CAAC,UAAU,EAAEG,SAAS,CAAC;EAClC,OAAOb,WAAW,CAACW,IAAI,CAAC,6BAA6B,EAAE;IAACE;EAAS,CAAC,CAAC;AACrE,CAAC;AAEH,OAAO,MAAMI,OAAO,GAAGA,CAACC,KAAY,EAAEV,OAAoB,KAAK;EAC7DC,OAAO,CAACS,KAAK,CAAC,SAAS,EAAEA,KAAK,CAAC;EAC/B,IAAIV,OAAO,EAAE;IACTC,OAAO,CAACC,GAAG,CAACF,OAAO,CAAC;IACpB;EACF;AACF,CAAC"},"metadata":{},"sourceType":"module","externalDependencies":[]}