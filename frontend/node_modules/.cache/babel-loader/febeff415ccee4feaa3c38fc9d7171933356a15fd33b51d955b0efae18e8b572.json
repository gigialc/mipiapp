{"ast":null,"code":"import _slicedToArray from\"/Users/georgina/DestigFemmeDemoPi/frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";var _window$__ENV;import React,{useState,useEffect,useContext}from\"react\";import{useLocation,useNavigate}from'react-router-dom';import axios from'axios';import{Button,Typography}from'@mui/material';import Header from\"../components/Header\";import PostContent from\"../components/PostContent\";import{UserContext}from\"../components/Auth\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var _window=window;var backendURL=(_window$__ENV=_window.__ENV)===null||_window$__ENV===void 0?void 0:_window$__ENV.backendURL;var axiosClient=axios.create({baseURL:\"\".concat(backendURL),timeout:20000,withCredentials:true});export default function Chat(){var _location$state;var _ref=useContext(UserContext),user=_ref.user,saveUser=_ref.saveUser,showModal=_ref.showModal,saveShowModal=_ref.saveShowModal,onModalClose=_ref.onModalClose;var _useState=useState(null),_useState2=_slicedToArray(_useState,2),community=_useState2[0],setCommunity=_useState2[1];var _useState3=useState(null),_useState4=_slicedToArray(_useState3,2),createCommunityData=_useState4[0],setCreateCommunityData=_useState4[1];;var _useState5=useState(null),_useState6=_slicedToArray(_useState5,2),selectedCommunity=_useState6[0],setSelectedCommunity=_useState6[1];var _useState7=useState(false),_useState8=_slicedToArray(_useState7,2),isFollowing=_useState8[0],setIsFollowing=_useState8[1];var navigate=useNavigate();var location=useLocation();var communityId=(_location$state=location.state)===null||_location$state===void 0?void 0:_location$state.communityId;var handleNavigatePublicProfile=function handleNavigatePublicProfile(communityId){navigate(\"/PublicProfile\",{state:{communityId:communityId}});};useEffect(function(){if(!communityId)return;axiosClient.get(\"/community/community/\".concat(communityId)).then(function(response){setCommunity(response.data);}).catch(function(error){console.error(error);});},[communityId]);var handleFollow=function handleFollow(){if(isFollowing){axiosClient.post(\"/users/joined\",{communityId:communityId}).then(function(response){console.log(response);setIsFollowing(false);}).catch(function(error){console.error(error);});return;}// Ensure this matches what your backend expects\nvar data={userId:user.uid,// Assuming user.uid is the unique identifier for the user\ncommunityId:communityId// The ID of the community to follow\n};axiosClient.post('/user/addUser',data).then(function(response){console.log('Response:',response);setIsFollowing(true);// Update following state based on response\n// Optionally, refresh or update the community data to reflect the new state\n}).catch(function(error){console.error('Error:',error);});};return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(Header,{}),/*#__PURE__*/_jsxs(\"div\",{style:{padding:'15px'},children:[/*#__PURE__*/_jsx(\"div\",{style:{marginBottom:'20px'},children:community?/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"div\",{style:{display:'flex',justifyContent:'space-between',alignItems:'center'},children:/*#__PURE__*/_jsx(Typography,{variant:\"h5\",style:{fontWeight:'bold'},children:community.name})}),/*#__PURE__*/_jsx(Typography,{variant:\"subtitle1\",style:{marginTop:'0px'},children:/*#__PURE__*/_jsxs(Button,{style:{color:'#4C4E52',textTransform:'none',padding:0,// Remove padding if you want the button to look like plain text\nminWidth:0// Use this to prevent the button from having a minimum size\n},onClick:function onClick(){return handleNavigatePublicProfile(communityId);},children:[\"@\",community.user.username]})}),/*#__PURE__*/_jsx(Typography,{variant:\"body1\",style:{marginTop:'10px'},children:community.description})]}):/*#__PURE__*/_jsx(Typography,{variant:\"h6\",children:\"Loading community details...\"})}),/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(PostContent,{communityId:communityId})})]}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"br\",{})]});}","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}