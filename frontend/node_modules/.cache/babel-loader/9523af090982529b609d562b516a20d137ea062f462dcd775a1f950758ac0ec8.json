{"ast":null,"code":"import _regeneratorRuntime from\"/Users/georgina/DestigFemmeDemoPi/frontend/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/Users/georgina/DestigFemmeDemoPi/frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/Users/georgina/DestigFemmeDemoPi/frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";// Created by Georgina Alacaraz\nimport{onCancel,onError,onReadyForServerApproval,onReadyForServerCompletion}from\"../components/Payments\";import Header from\"../components/Header\";import Typography from\"@mui/material/Typography\";import{UserContext}from\"../components/Auth\";import React,{useEffect,useState}from\"react\";import axios from'axios';import{useNavigate}from'react-router-dom';import{Tabs,Tab,Box}from\"@mui/material\";import MyList from\"../components/mylist\";import Subscribed from\"../components/subscribed\";import EditProfile from\"../components/editProfile\";// Make TS accept the existence of our window.__ENV object - defined in index.html:\nimport{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var _window=window;var backendURL=_window.__ENV&&_window.__ENV.backendURL;var axiosClient=axios.create({baseURL:\"\".concat(backendURL),timeout:20000,withCredentials:true});var config={headers:{'Content-Type':'application/json','Access-Control-Allow-Origin':'*'}};export default function UserToAppPayments(){var _ref=React.useContext(UserContext),user=_ref.user,saveUser=_ref.saveUser,showModal=_ref.showModal,saveShowModal=_ref.saveShowModal,onModalClose=_ref.onModalClose;var _useState=useState(null),_useState2=_slicedToArray(_useState,2),createCommunityData=_useState2[0],setCreateCommunityData=_useState2[1];var _useState3=useState(null),_useState4=_slicedToArray(_useState3,2),selectedCommunity=_useState4[0],setSelectedCommunity=_useState4[1];// Moved here\nvar _useState5=useState(null),_useState6=_slicedToArray(_useState5,2),userData=_useState6[0],setUserData=_useState6[1];var _useState7=useState(false),_useState8=_slicedToArray(_useState7,2),openFormModal=_useState8[0],setOpenFormModal=_useState8[1];var _useState9=useState(user.username||\"anonymous\"),_useState10=_slicedToArray(_useState9,2),username=_useState10[0],setUsername=_useState10[1];var _useState11=useState(\"\"),_useState12=_slicedToArray(_useState11,2),inputValue=_useState12[0],setInputValue=_useState12[1];var _useState13=useState(0),_useState14=_slicedToArray(_useState13,2),tabValue=_useState14[0],setTabValue=_useState14[1];// Default to the first tab\nvar _useState15=useState(false),_useState16=_slicedToArray(_useState15,2),showUpdate=_useState16[0],setShowUpdate=_useState16[1];var _useState17=useState(user.bio||\"No bio yet\"),_useState18=_slicedToArray(_useState17,2),bio=_useState18[0],setBio=_useState18[1];var _useState19=useState(user.coinbalance||0),_useState20=_slicedToArray(_useState19,2),coins=_useState20[0],setCoins=_useState20[1];console.log(\"User Data :\",userData);console.log(\"User: \",user);console.log(\"User Data: \",user.username);console.log(\"User Data: \",user.bio);var navigate=useNavigate();var getGreeting=function getGreeting(){var currentHour=new Date().getHours();if(currentHour>=0&&currentHour<12){return\"Good Morning\";}else if(currentHour>=12&&currentHour<18){return\"Good Afternoon\";}else{return\"Good Night\";}};var handleUsernameChange=function handleUsernameChange(event){setInputValue(event.target.value);};var updateUsername=function updateUsername(){axiosClient.post('/user/update',{username:inputValue,bio:bio,coinbalance:coins}).then(function(response){console.log('Response data for /user/update:',response.data);setUsername(inputValue);setBio(bio);}).catch(function(error){console.error('Error updating username:',error);});console.log('Updating username to: ',inputValue);setShowUpdate(false);};var handleTabChange=function handleTabChange(event,newValue){setTabValue(newValue);};var orderProduct=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(memo,amount,paymentMetadata){var paymentData,callbacks,payment;return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:if(!(user.uid===\"\")){_context.next=2;break;}return _context.abrupt(\"return\",saveShowModal(true));case 2:// Define a state to track the selected community\npaymentData={amount:amount,memo:memo,metadata:paymentMetadata};callbacks={onReadyForServerApproval:onReadyForServerApproval,onReadyForServerCompletion:onReadyForServerCompletion,onCancel:onCancel,onError:onError};_context.next=6;return window.Pi.createPayment(paymentData,callbacks);case 6:payment=_context.sent;console.log(payment);case 8:case\"end\":return _context.stop();}}},_callee);}));return function orderProduct(_x,_x2,_x3){return _ref2.apply(this,arguments);};}();useEffect(function(){console.log(user);},[user]);useEffect(function(){axiosClient.get('/user/me').then(function(response){console.log('Response data for /user/me:',response.data);// If response.data is an array, we can use forEach\nif(Array.isArray(response.data)){response.data.forEach(function(community){if(!community._id){console.error('Community does not have _id:',community);}});setCreateCommunityData(response.data);}else{console.error('Expected an array for /user/me response data, but got:',response.data);}}).catch(function(error){console.error('Error fetching /user/me:',error);});},[]);useEffect(function(){axiosClient.get('/user/joined').then(function(response){console.log('Joined communities:',response.data);setSelectedCommunity(response.data);}).catch(function(error){console.error('Error fetching joined communities:',error);});},[]);return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(Header,{}),/*#__PURE__*/_jsxs(\"div\",{style:{padding:'20px',marginBottom:'80px'},children:[/*#__PURE__*/_jsxs(Typography,{variant:\"h6\",style:{fontWeight:'bold',color:'#E69BD1',marginBottom:'0px'},children:[\"Welcome to your profile, \",user.username,\" !\"]}),/*#__PURE__*/_jsx(EditProfile,{}),/*#__PURE__*/_jsxs(\"div\",{style:{},children:[/*#__PURE__*/_jsx(Box,{sx:{width:'100%',bgcolor:'background.paper'// This sets the background color of the Tabs\n},children:/*#__PURE__*/_jsxs(Tabs,{value:tabValue,onChange:handleTabChange,TabIndicatorProps:{style:{background:'pink'}},children:[/*#__PURE__*/_jsx(Tab,{label:\"my communities\",style:{textTransform:'none',fontSize:15,color:\"black\",fontWeight:\"bold\"}}),/*#__PURE__*/_jsx(Tab,{label:\"subscribed\",style:{textTransform:'none',fontSize:15,color:\"black\",fontWeight:\"bold\"}})]})}),tabValue===0&&/*#__PURE__*/_jsx(MyList,{}),tabValue===1&&/*#__PURE__*/_jsx(Subscribed,{})]})]})]});}","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}