{"code":"(this[\"webpackJsonpapp-platform-demo-frontend\"]=this[\"webpackJsonpapp-platform-demo-frontend\"]||[]).push([[0],{26:function(e,t,n){},52:function(e,t,n){\"use strict\";n.r(t);var o=n(2),i=n.n(o),r=n(19),c=n.n(r),a=(n(25),n(26),n(4)),s=n(8),l=n(9),u=n(20),d=n.n(u),p=n(0);function h(e){return Object(p.jsxs)(\"div\",{style:{margin:16,paddingBottom:16,borderBottom:\"1px solid gray\"},children:[Object(p.jsxs)(\"div\",{style:{display:\"flex\",flexDirection:\"row\"},children:[Object(p.jsx)(\"div\",{style:{width:\"33%\",marginRight:8},children:Object(p.jsx)(\"img\",{style:{width:\"100%\"},src:e.pictureURL,alt:e.name})}),Object(p.jsxs)(\"div\",{style:{width:\"66%\"},children:[Object(p.jsx)(\"h3\",{children:e.name}),Object(p.jsx)(\"p\",{children:e.description})]})]}),Object(p.jsxs)(\"div\",{style:{textAlign:\"center\",marginBottom:8},children:[Object(p.jsxs)(\"strong\",{children:[e.price,\"\\u03c0\"]}),\" \",Object(p.jsx)(\"br\",{}),Object(p.jsx)(\"button\",{onClick:e.onClickBuy,children:\"Join community\"})]}),Object(p.jsx)(\"span\",{style:{fontSize:\"0.6em\"},children:e.pictureCaption})]})}var m={background:\"red\",position:\"absolute\",left:\"15vw\",top:\"40%\",width:\"70vw\",height:\"25vh\",border:\"1px solid red\",textAlign:\"center\",display:\"flex\",flexDirection:\"column\",justifyContent:\"center\"};function b(e){return Object(p.jsxs)(\"div\",{style:m,children:[Object(p.jsx)(\"p\",{style:{fontWeight:\"bold\"},children:\"You need to sign in first.\"}),Object(p.jsxs)(\"div\",{children:[Object(p.jsx)(\"button\",{onClick:e.onSignIn,style:{marginRight:\"1em\"},children:\"Sign in\"}),Object(p.jsx)(\"button\",{onClick:e.onModalClose,children:\"Close\"})]})]})}var j={padding:8,backgroundColor:\"white\",color:\"red\",width:\"100%\",display:\"flex\",alignItems:\"center\",justifyContent:\"space-between\"};function y(e){return Object(p.jsxs)(\"header\",{style:j,children:[Object(p.jsx)(\"div\",{style:{fontWeight:\"bold\"},children:\"Communities\"}),Object(p.jsx)(\"div\",{children:Object(p.jsx)(\"button\",{type:\"button\",onClick:function(){window.open(\"./public/quiz.html\",\"_blank\")},children:\"News\"})}),Object(p.jsx)(\"div\",{children:Object(p.jsx)(\"button\",{type:\"button\",onClick:function(){window.open(\"./public/quiz.html\",\"_blank\")},children:\"Quiz\"})}),Object(p.jsx)(\"div\",{children:null===e.user?Object(p.jsx)(\"button\",{onClick:e.onSignIn,children:\"Sign in\"}):Object(p.jsxs)(\"div\",{children:[\"@\",e.user.username,\" \",Object(p.jsx)(\"button\",{type:\"button\",onClick:e.onSignOut,children:\"Sign out\"})]})})]})}var g=window,w=g.__ENV&&g.__ENV.backendURL,f=d.a.create({baseURL:\"\".concat(w),timeout:2e4,withCredentials:!0}),x={headers:{\"Content-Type\":\"application/json\",\"Access-Control-Allow-Origin\":\"*\"}};function O(){var e=Object(o.useState)(null),t=Object(l.a)(e,2),n=t[0],i=t[1],r=Object(o.useState)(!1),c=Object(l.a)(r,2),u=c[0],d=c[1],m=function(){var e=Object(s.a)(Object(a.a)().mark((function e(){var t,n;return Object(a.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=[\"username\",\"payments\"],e.next=3,window.Pi.authenticate(t,O);case 3:n=e.sent,j(n),i(n.user);case 6:case\"end\":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),j=function(e){return f.post(\"/user/signin\",{authResult:e}),d(!1)},g=function(){return f.get(\"/user/signout\")},w=function(){var e=Object(s.a)(Object(a.a)().mark((function e(t,o,i){var r,c,s;return Object(a.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!==n){e.next=2;break}return e.abrupt(\"return\",d(!0));case 2:return r={amount:o,memo:t,metadata:i},c={onReadyForServerApproval:v,onReadyForServerCompletion:C,onCancel:k,onError:S},e.next=6,window.Pi.createPayment(r,c);case 6:s=e.sent,console.log(s);case 8:case\"end\":return e.stop()}}),e)})));return function(t,n,o){return e.apply(this,arguments)}}(),O=function(e){return console.log(\"onIncompletePaymentFound\",e),f.post(\"/payments/incomplete\",{payment:e})},v=function(e){console.log(\"onReadyForServerApproval\",e),f.post(\"/payments/approve\",{paymentId:e},x)},C=function(e,t){console.log(\"onReadyForServerCompletion\",e,t),f.post(\"/payments/complete\",{paymentId:e,txid:t},x)},k=function(e){return console.log(\"onCancel\",e),f.post(\"/payments/cancelled_payment\",{paymentId:e})},S=function(e,t){console.log(\"onError\",e),t&&console.log(t)};return Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)(y,{user:n,onSignIn:m,onSignOut:function(){i(null),g()}}),Object(p.jsx)(h,{name:\"Abortion Rights\",description:\" The new abortion laws in the United States are a great example of why abortion stigma is a big issue that has to be tackled. This community supports and openly talks about abortion to empower each other and educate the rest of the world.\",price:1,pictureURL:\"https://static.vecteezy.com/system/resources/previews/009/730/589/non_2x/women-with-banners-my-body-my-choice-my-right-vector.jpg\",pictureCaption:\"https://static.vecteezy.com/system/resources/previews/009/730/589/non_2x/women-with-banners-my-body-my-choice-my-right-vector.jpg\",onClickBuy:function(){return w(\"Pay to enter community\",1,{productId:\"Abortion Rights\"})}}),Object(p.jsx)(h,{name:\"Mental Health\",description:\"Talking opnely about mental health creates a culture of understanding. By starting conversations about mental health, we can create a more inclusive and compassionate society where people feel comfortable seeking help and support when they need it.\",price:1,pictureURL:\"https://www.planstreetinc.com/wp-content/uploads/2021/07/what-is-mental-health.png\",pictureCaption:\"ttps://www.planstreetinc.com/wp-content/uploads/2021/07/what-is-mental-health.png\",onClickBuy:function(){return w(\"Pay to enter community\",1,{productId:\"Mental Health\"})}}),Object(p.jsx)(h,{name:\"Period Stigma\",description:\"Periods are beautiful and normal, they should be celebrated and not hidden. This community aims to normalize talking about periods to ensure that menstruators are healthy and comfortable in their bodies.  \",price:1,pictureURL:\"https://www.healthywomen.org/media-library/image.jpg?id=27287943&width=1200&height=800&quality=85&coordinates=0%2C169%2C0%2C0\",pictureCaption:\"https://www.healthywomen.org/media-library/image.jpg?id=27287943&width=1200&height=800&quality=85&coordinates=0%2C169%2C0%2C0\",onClickBuy:function(){return w(\"Pay to enter community\",1,{productId:\"Period Stigma\"})}}),u&&Object(p.jsx)(b,{onSignIn:m,onModalClose:function(){d(!1)},onPosts:function(){throw new Error(\"Function not implemented.\")}})]})}c.a.render(Object(p.jsx)(i.a.StrictMode,{children:Object(p.jsx)(O,{})}),document.getElementById(\"root\"))}},[[52,1,2]]]);","name":"static/js/main.b7ef4531.chunk.js","input":"(this[\"webpackJsonpapp-platform-demo-frontend\"] = this[\"webpackJsonpapp-platform-demo-frontend\"] || []).push([[0],{\n\n/***/ 26:\n/***/ (function(module, exports, __webpack_require__) {\n\n// extracted by mini-css-extract-plugin\n\n/***/ }),\n\n/***/ 52:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n// ESM COMPAT FLAG\n__webpack_require__.r(__webpack_exports__);\n\n// EXTERNAL MODULE: ./node_modules/react/index.js\nvar react = __webpack_require__(2);\nvar react_default = /*#__PURE__*/__webpack_require__.n(react);\n\n// EXTERNAL MODULE: ./node_modules/react-dom/index.js\nvar react_dom = __webpack_require__(19);\nvar react_dom_default = /*#__PURE__*/__webpack_require__.n(react_dom);\n\n// EXTERNAL MODULE: ./node_modules/normalize.css/normalize.css\nvar normalize = __webpack_require__(25);\n\n// EXTERNAL MODULE: ./src/defaults.css\nvar defaults = __webpack_require__(26);\n\n// EXTERNAL MODULE: ./node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js + 1 modules\nvar regeneratorRuntime = __webpack_require__(4);\n\n// EXTERNAL MODULE: ./node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\nvar asyncToGenerator = __webpack_require__(8);\n\n// EXTERNAL MODULE: ./node_modules/@babel/runtime/helpers/esm/slicedToArray.js + 5 modules\nvar slicedToArray = __webpack_require__(9);\n\n// EXTERNAL MODULE: ./node_modules/axios/index.js\nvar axios = __webpack_require__(20);\nvar axios_default = /*#__PURE__*/__webpack_require__.n(axios);\n\n// EXTERNAL MODULE: ./node_modules/react/jsx-runtime.js\nvar jsx_runtime = __webpack_require__(0);\n\n// CONCATENATED MODULE: ./src/Shop/components/ProductCard.tsx\nfunction ProductCard(props){return/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(\"div\",{style:{margin:16,paddingBottom:16,borderBottom:'1px solid gray'},children:[/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(\"div\",{style:{display:'flex',flexDirection:'row'},children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"div\",{style:{width:\"33%\",marginRight:8},children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"img\",{style:{width:\"100%\"},src:props.pictureURL,alt:props.name})}),/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(\"div\",{style:{width:\"66%\"},children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"h3\",{children:props.name}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"p\",{children:props.description})]})]}),/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(\"div\",{style:{textAlign:'center',marginBottom:8},children:[/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(\"strong\",{children:[props.price,\"\\u03C0\"]}),\" \",/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"br\",{}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"button\",{onClick:props.onClickBuy,children:\"Join community\"})]}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"span\",{style:{fontSize:'0.6em'},children:props.pictureCaption})]});}\n// CONCATENATED MODULE: ./src/Shop/components/SignIn.tsx\nvar modalStyle={background:'red',position:'absolute',left:'15vw',top:'40%',width:'70vw',height:'25vh',border:'1px solid red',textAlign:'center',display:'flex',flexDirection:'column',justifyContent:'center'};function SignIn(props){return/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(\"div\",{style:modalStyle,children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"p\",{style:{fontWeight:'bold'},children:\"You need to sign in first.\"}),/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(\"div\",{children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"button\",{onClick:props.onSignIn,style:{marginRight:'1em'},children:\"Sign in\"}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"button\",{onClick:props.onModalClose,children:\"Close\"})]})]});}function Posts(props){return/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"div\",{style:modalStyle,children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"div\",{children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"button\",{onClick:props.onPosts,style:{marginRight:'1em'},children:\"Posts\"})})});}\n// CONCATENATED MODULE: ./src/Shop/components/Header.tsx\nvar headerStyle={padding:8,backgroundColor:\"white\",color:\"red\",width:\"100%\",display:\"flex\",alignItems:\"center\",justifyContent:\"space-between\"};//add more headers on the top bars\nfunction Header(props){return/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(\"header\",{style:headerStyle,children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"div\",{style:{fontWeight:\"bold\"},children:\"Communities\"}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"div\",{children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"button\",{type:\"button\",onClick:onPosts,children:\"News\"})}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"div\",{children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"button\",{type:\"button\",onClick:onChat,children:\"Quiz\"})}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"div\",{children:props.user===null?/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"button\",{onClick:props.onSignIn,children:\"Sign in\"}):/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(\"div\",{children:[\"@\",props.user.username,\" \",/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"button\",{type:\"button\",onClick:props.onSignOut,children:\"Sign out\"})]})})]});function onPosts(){window.open(\"./public/quiz.html\",\"_blank\");}function onChat(){window.open(\"./public/quiz.html\",\"_blank\");}}\n// CONCATENATED MODULE: ./src/Shop/index.tsx\n;// Make TS accept the existence of our window.__ENV object - defined in index.html:\nvar _window=window;var backendURL=_window.__ENV&&_window.__ENV.backendURL;var axiosClient=axios_default.a.create({baseURL:\"\".concat(backendURL),timeout:20000,withCredentials:true});var config={headers:{'Content-Type':'application/json','Access-Control-Allow-Origin':'*'}};function Shop(){var _useState=Object(react[\"useState\"])(null),_useState2=Object(slicedToArray[\"a\" /* default */])(_useState,2),user=_useState2[0],setUser=_useState2[1];var _useState3=Object(react[\"useState\"])(false),_useState4=Object(slicedToArray[\"a\" /* default */])(_useState3,2),showModal=_useState4[0],setShowModal=_useState4[1];var signIn=/*#__PURE__*/function(){var _ref=Object(asyncToGenerator[\"a\" /* default */])(/*#__PURE__*/Object(regeneratorRuntime[\"a\" /* default */])().mark(function _callee(){var scopes,authResult;return Object(regeneratorRuntime[\"a\" /* default */])().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:scopes=['username','payments'];_context.next=3;return window.Pi.authenticate(scopes,onIncompletePaymentFound);case 3:authResult=_context.sent;signInUser(authResult);setUser(authResult.user);case 6:case\"end\":return _context.stop();}}},_callee);}));return function signIn(){return _ref.apply(this,arguments);};}();var signOut=function signOut(){setUser(null);signOutUser();};var signInUser=function signInUser(authResult){axiosClient.post('/user/signin',{authResult:authResult});return setShowModal(false);};var signOutUser=function signOutUser(){return axiosClient.get('/user/signout');};var onModalClose=function onModalClose(){setShowModal(false);};var orderProduct=/*#__PURE__*/function(){var _ref2=Object(asyncToGenerator[\"a\" /* default */])(/*#__PURE__*/Object(regeneratorRuntime[\"a\" /* default */])().mark(function _callee2(memo,amount,paymentMetadata){var paymentData,callbacks,payment;return Object(regeneratorRuntime[\"a\" /* default */])().wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:if(!(user===null)){_context2.next=2;break;}return _context2.abrupt(\"return\",setShowModal(true));case 2:paymentData={amount:amount,memo:memo,metadata:paymentMetadata};callbacks={onReadyForServerApproval:onReadyForServerApproval,onReadyForServerCompletion:onReadyForServerCompletion,onCancel:onCancel,onError:onError};_context2.next=6;return window.Pi.createPayment(paymentData,callbacks);case 6:payment=_context2.sent;console.log(payment);case 8:case\"end\":return _context2.stop();}}},_callee2);}));return function orderProduct(_x,_x2,_x3){return _ref2.apply(this,arguments);};}();var onIncompletePaymentFound=function onIncompletePaymentFound(payment){console.log(\"onIncompletePaymentFound\",payment);return axiosClient.post('/payments/incomplete',{payment:payment});};var onReadyForServerApproval=function onReadyForServerApproval(paymentId){console.log(\"onReadyForServerApproval\",paymentId);axiosClient.post('/payments/approve',{paymentId:paymentId},config);};var onReadyForServerCompletion=function onReadyForServerCompletion(paymentId,txid){console.log(\"onReadyForServerCompletion\",paymentId,txid);axiosClient.post('/payments/complete',{paymentId:paymentId,txid:txid},config);};var onCancel=function onCancel(paymentId){console.log(\"onCancel\",paymentId);return axiosClient.post('/payments/cancelled_payment',{paymentId:paymentId});};var onError=function onError(error,payment){console.log(\"onError\",error);if(payment){console.log(payment);// handle the error accordingly\n}};return/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(jsx_runtime[\"Fragment\"],{children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Header,{user:user,onSignIn:signIn,onSignOut:signOut}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(ProductCard,{name:\"Abortion Rights\",description:\" The new abortion laws in the United States are a great example of why abortion stigma is a big issue that has to be tackled. This community supports and openly talks about abortion to empower each other and educate the rest of the world.\",price:1,pictureURL:\"https://static.vecteezy.com/system/resources/previews/009/730/589/non_2x/women-with-banners-my-body-my-choice-my-right-vector.jpg\",pictureCaption:\"https://static.vecteezy.com/system/resources/previews/009/730/589/non_2x/women-with-banners-my-body-my-choice-my-right-vector.jpg\",onClickBuy:function onClickBuy(){return orderProduct(\"Pay to enter community\",1,{productId:'Abortion Rights'});}}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(ProductCard,{name:\"Mental Health\",description:\"Talking opnely about mental health creates a culture of understanding. By starting conversations about mental health, we can create a more inclusive and compassionate society where people feel comfortable seeking help and support when they need it.\",price:1,pictureURL:\"https://www.planstreetinc.com/wp-content/uploads/2021/07/what-is-mental-health.png\",pictureCaption:\"ttps://www.planstreetinc.com/wp-content/uploads/2021/07/what-is-mental-health.png\",onClickBuy:function onClickBuy(){return orderProduct(\"Pay to enter community\",1,{productId:'Mental Health'});}}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(ProductCard,{name:\"Period Stigma\",description:\"Periods are beautiful and normal, they should be celebrated and not hidden. This community aims to normalize talking about periods to ensure that menstruators are healthy and comfortable in their bodies.  \",price:1,pictureURL:\"https://www.healthywomen.org/media-library/image.jpg?id=27287943&width=1200&height=800&quality=85&coordinates=0%2C169%2C0%2C0\",pictureCaption:\"https://www.healthywomen.org/media-library/image.jpg?id=27287943&width=1200&height=800&quality=85&coordinates=0%2C169%2C0%2C0\",onClickBuy:function onClickBuy(){return orderProduct(\"Pay to enter community\",1,{productId:'Period Stigma'});}}),showModal&&/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(SignIn,{onSignIn:signIn,onModalClose:onModalClose,onPosts:function onPosts(){throw new Error('Function not implemented.');}})]});}\n// CONCATENATED MODULE: ./src/index.tsx\nreact_dom_default.a.render(/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(react_default.a.StrictMode,{children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Shop,{})}),document.getElementById('root'));\n\n/***/ })\n\n},[[52,1,2]]]);","inputSourceMap":null}